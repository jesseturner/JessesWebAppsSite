<!DOCTYPE HTML>
<html>
	<head>
		<title>Geolocation Checker</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<a href="index.html" class="logo">JESSE TURNER</a>
					</header>

				<!-- Nav -->
					<nav id="nav">
						<ul class="links">
							<li><a href="index.html">Updates & Logs</a></li>
						</ul>
						<ul class="icons">
							<li><a href="https://github.com/jesseturner/JessesWebAppsSite" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">
						<div class="simple_flex_container">
										<div class="simple_flex_child">
											<header>
												<span class="date">Last Updated: February 2nd, 2021</span>
												<h2>Geolocation Checker</h2>
											</header>
											<p class="description">This app accesses the user's browser's location detection to determine 
											their coordinates. It doesn't work if the location detection is disabled on the browser. </p>
										</div>
						</div>
						<script> 
							if ('geolocation' in navigator) {
								console.log('geolocation available');
								navigator.geolocation.getCurrentPosition(async position => {
									const lat = position.coords.latitude;
									const lon = position.coords.longitude;
									document.getElementById('latitude').textContent = lat;
									document.getElementById('longitude').textContent = lon;
									// console.log(position);


									const data = { lat, lon };
									const options = {
										method: 'POST',
										headers: {
											'Content-Type': 'application/JSON'
										},
										body: JSON.stringify(data)
										};
									const response = await fetch('/locations', options);
									const json = await response.json();
									console.log(json);
								})
							} else {
								console.log('geolocation not available');
							}
						</script>

						<p>
							latitude: <span id="latitude"></span>&deg;<br />
							longitude: <span id="longitude"></span>&deg;
						</p>
					
					</div>


		<!-- Scripts -->

			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>

		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-988GZVZG3H"></script>
		<script>
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  gtag('js', new Date());

		  gtag('config', 'G-988GZVZG3H');
		</script>
</html>
